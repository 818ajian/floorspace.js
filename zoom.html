<!DOCTYPE html>
<meta charset="utf-8">
<style>

.axis line {
  stroke-opacity: 0.3;
  shape-rendering: crispEdges;
}

.view {
  fill: white;
  stroke: #000;
}

</style>
<svg width="960" height="500">
</svg>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.8.0/d3.js"></script>
<script>

var svg = d3.select("svg"),
    // px
    width = +svg.attr("width"),
    height = +svg.attr("height");

    const scaleX = d3.scaleLinear()
            .domain([0, width])
            .range([0, width]),
        scaleY = d3.scaleLinear()
            .domain([0, height])
            .range([0, height]);

    // axes
    const xAxisGenerator = d3.axisBottom(scaleX)
            .ticks(10 * width / height) // number of ticks
            .tickSize( height) // length of tick marks (full height of grid coming up from x axis)
            .tickPadding(-20), // padding between axisBottom and tick text
        yAxisGenerator = d3.axisRight(scaleY)
            .ticks(10) // number of ticks
            .tickSize(width) // length of tick marks (full width of grid coming up from y axis)
            .tickPadding(-20); // padding between axisRight and tick text

    const view = svg.append("rect")
        .attr("class", "view")
        .attr("width", width / 2)
        .attr("height", height / 2);

    const circles = [];
    for (var i = 0; i < 10; i++) {
        const circle = svg.append("circle")
            .attr("cx", width * Math.random())
            .attr("cy", height * Math.random())
            .attr("r", (width * Math.random())/10)
        circles.push(circle);
    }

    var xAxis = svg.append("g")
            .attr("class", "axis axis--x")
            .call(xAxisGenerator),
        yAxis = svg.append("g")
            .attr("class", "axis axis--y")
            .call(yAxisGenerator);


    var zoomBehavior = d3.zoom()
        // scale must be between .5 * original bounds and 2 * original bounds
        .scaleExtent([.5, 2])
        // allow panning by 200px in any direction
        .translateExtent([[-200, -200], [width + 200, height + 200]])
        .on("zoom", zoomHandler);

    svg.call(zoomBehavior);

    function zoomHandler() {
        // don't change the original scale or you'll get exponential growth
        // x = d3.event.transform.rescaleX(x)
        // y = d3.event.transform.rescaleX(y)

        view.attr("transform", d3.event.transform);
        circles.forEach(c => c.attr("transform", d3.event.transform))

        // create transformed copies of the scales and apply them to the axes
        xAxis.call(xAxisGenerator.scale(d3.event.transform.rescaleX(scaleX)));
        yAxis.call(yAxisGenerator.scale(d3.event.transform.rescaleY(scaleY)));

        // console.log(xAxis.call(xAxisGenerator.ticks(6)))
        // console.log(x.domain()[0], x.domain()[1], x.domain()[0] - x.domain()[1])
    }

</script>
